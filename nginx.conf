server {
  listen 80;
  server_name localhost;
  send_timeout 300s;
  keepalive_timeout 300s;

  # ì •ì  íŒŒì¼ì„ ì°¾ì„ ë£¨íŠ¸ ë””ë ‰í† ë¦¬
  root /usr/share/nginx/html;
  index index.html index.htm;

  location / {
    # ìš”ì²­ëœ íŒŒì¼($uri)ì´ ì—†ìœ¼ë©´, ë””ë ‰í† ë¦¬($uri/)ë¥¼ ì‹œë„í•˜ê³ ,
    # ê·¸ë˜ë„ ì—†ìœ¼ë©´ /index.htmlì„ ë°˜í™˜ (React Routerê°€ ì²˜ë¦¬í•˜ë„ë¡ í•¨)
    try_files $uri $uri/ /index.html;
  }

  # ğŸ”¹ FastAPI ë°±ì—”ë“œ í”„ë¡ì‹œ
  location /fast_api/ {
    # /fast_api/ ì´í•˜ ê²½ë¡œë§Œ ë°±ì—”ë“œë¡œ ë„˜ê¸°ê³ , /fast_api ì ‘ë‘ì‚¬ëŠ” ì œê±°
    proxy_pass http://192.168.2.135:9876/;
    proxy_http_version 1.1;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_read_timeout 600s;
  }


  # gzip ì••ì¶• ì„¤ì • (ì„ íƒ ì‚¬í•­ì´ì§€ë§Œ ê¶Œì¥)
  gzip on;
  gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
  gzip_proxied any;
  gzip_min_length 1000;
  gzip_comp_level 6;
  gzip_buffers 16 8k;
  gzip_vary on;
}
